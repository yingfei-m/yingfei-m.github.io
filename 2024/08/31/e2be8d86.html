<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>27-Java｜异常处理 | 小蓝_</title><meta name="author" content="小蓝_"><meta name="copyright" content="小蓝_"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="异常的概念什么是异常？  指的是程序在执行过程中，出现的非正常情况，如果不处理最终会导致JVM的非正常停止。  异常的抛出机制  Java 中把不同的异常用不同的类表示，一旦发生某种异常，就创建该异常类型的对象，并且抛出（throw）。然后程序员可以捕获(catch)到这个异常对象，并处理；如果没有捕获(catch)这个异常对象，那么这个异常对象将会导致程序终止。  如何对待异常  对于程序出现的"><meta property="og:type" content="article"><meta property="og:title" content="27-Java｜异常处理"><meta property="og:url" content="https://yingfei-m.github.io/2024/08/31/e2be8d86.html"><meta property="og:site_name" content="小蓝_"><meta property="og:description" content="异常的概念什么是异常？  指的是程序在执行过程中，出现的非正常情况，如果不处理最终会导致JVM的非正常停止。  异常的抛出机制  Java 中把不同的异常用不同的类表示，一旦发生某种异常，就创建该异常类型的对象，并且抛出（throw）。然后程序员可以捕获(catch)到这个异常对象，并处理；如果没有捕获(catch)这个异常对象，那么这个异常对象将会导致程序终止。  如何对待异常  对于程序出现的"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://yingfei-m.github.io/img/cat.jpg"><meta property="article:published_time" content="2024-08-31T10:18:55.000Z"><meta property="article:modified_time" content="2024-09-01T11:26:59.472Z"><meta property="article:author" content="小蓝_"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://yingfei-m.github.io/img/cat.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "27-Java｜异常处理",
  "url": "https://yingfei-m.github.io/2024/08/31/e2be8d86.html",
  "image": "https://yingfei-m.github.io/img/cat.jpg",
  "datePublished": "2024-08-31T10:18:55.000Z",
  "dateModified": "2024-09-01T11:26:59.472Z",
  "author": [
    {
      "@type": "Person",
      "name": "小蓝_",
      "url": "https://yingfei-m.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/cat.png"><link rel="canonical" href="https://yingfei-m.github.io/2024/08/31/e2be8d86.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css?v=5.3.2"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css"><script>(()=>{const e={set:(e,t,o)=>{if(!o)return;const a=Date.now()+864e5*o;localStorage.setItem(e,JSON.stringify({value:t,expiry:a}))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const{value:o,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return o;localStorage.removeItem(e)}};window.btf={saveToLocal:e,getScript:(e,t={})=>new Promise((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,Object.entries(t).forEach(([e,t])=>n.setAttribute(e,t)),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)}),getCSS:(e,t)=>new Promise((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)}),addGlobalFn:(e,t,o=!1,a=window)=>{if(e.startsWith("pjax"))return;const n=a.globalFn||{};n[e]=n[e]||{},n[e][o||Object.keys(n[e]).length]=t,a.globalFn=n}};const t=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},o=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};btf.activateDarkMode=t,btf.activateLightMode=o;const a=e.get("theme");"dark"===a?t():"light"===a&&o();const n=e.get("aside-status");void 0!==n&&document.documentElement.classList.toggle("hide-aside","hide"===n);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:void 0,translate:void 0,highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1,highlightFullpage:!1,highlightMacStyle:!1},copy:{success:"复制成功",error:"复制失败",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"null",Snackbar:void 0,infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js",buttonText:"加载更多"},isPhotoFigcaption:!1,islazyloadPlugin:!1,isAnchor:!1,percent:{toc:!0,rightside:!1},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"27-Java｜异常处理",isHighlightShrink:!1,isToc:!0,pageType:"post"}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/cat.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">26</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/img/banner.jpeg)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">小蓝_</span></a><a class="nav-page-title" href="/"><span class="site-name">27-Java｜异常处理</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">27-Java｜异常处理</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2024-08-31T10:18:55.000Z" title="发表于 2024-08-31 18:18:55">2024-08-31</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/JavaSE/">JavaSE</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">4.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>15分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="异常的概念"><a href="#异常的概念" class="headerlink" title="异常的概念"></a>异常的概念</h1><p><strong>什么是异常？</strong></p><ul><li>指的是程序在执行过程中，出现的非正常情况，如果不处理最终会导致JVM的非正常停止。</li></ul><p><strong>异常的抛出机制</strong></p><ul><li>Java 中把不同的异常用不同的类表示，一旦发生某种异常，就<code>创建该异常类型的对象</code>，并且抛出（throw）。然后程序员可以捕获(catch)到这个异常对象，并处理；如果没有捕获(catch)这个异常对象，那么这个异常对象将会导致程序终止。</li></ul><p><strong>如何对待异常</strong></p><ul><li>对于程序出现的异常，一般有两种解决方法：一是遇到错误就终止程序的运行。另一种方法是程序员在编写程序时，就充分考虑到各种可能发生的异常和错误，极力预防和避免。实在无法避免的，要编写相应的代码进行异常的检测、以及<code>异常的处理</code>，保证代码的<code>健壮性</code>。</li></ul><h1 id="异常的体系"><a href="#异常的体系" class="headerlink" title="异常的体系"></a>异常的体系</h1><p><img src="/../../img/Java/27-Java%EF%BD%9C%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/image.png"></p><p>在 Java 中，异常是通过类来表示的，所有异常类都是<code>java.lang.Throwable</code>类的子类。<code>Throwable</code>类有两个直接子类：</p><ul><li><code>Error</code>: 表示系统级的错误，通常是由 JVM 抛出的，程序一般不应捕获此类异常。例如：<code>OutOfMemoryError</code>。</li><li><code>Exception</code>: 表示程序中可以捕获和处理的异常。</li></ul><p><code>Exception</code>类又分为两类：</p><ul><li><strong>Checked Exception（受检异常）</strong>: 必须在编译时处理的异常。程序在编译时如果没有对这些异常进行处理（通过try-catch或者throws声明），会导致编译错误。例如：<code>IOException</code>, <code>SQLException</code>。</li><li><strong>Unchecked Exception（非受检异常）</strong>: 运行时异常，不强制要求在编译时处理，通常是由程序逻辑错误引起的，例如：<code>NullPointerException</code>, <code>ArrayIndexOutOfBoundsException</code>。</li></ul><h2 id="运行时异常"><a href="#运行时异常" class="headerlink" title="运行时异常"></a>运行时异常</h2><p>&emsp;&emsp;在 Java 中，运行时异常（<code>RuntimeException</code>）通常是程序逻辑错误引起的，例如除零错误、空指针引用、数组越界等。由于运行时异常是非受检异常，Java编译器不会强制要求你处理这些异常，但你仍然可以使用<code>try-catch</code>块来捕获并处理它们，以防止程序崩溃。</p><h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例 1"></a>示例 1</h3><p><code>NullPointerException</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RuntimeExceptionExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 尝试调用str的length()方法，这会导致NullPointerException</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> str.length();</span><br><span class="line">            System.out.println(<span class="string">&quot;字符串的长度是: &quot;</span> + length);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NullPointerException e) &#123;</span><br><span class="line">            <span class="comment">// 捕获并处理NullPointerException</span></span><br><span class="line">            System.out.println(<span class="string">&quot;发生了空指针异常: &quot;</span> + e.getMessage());</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// finally块，始终会执行</span></span><br><span class="line">            System.out.println(<span class="string">&quot;这是finally块，无论是否发生异常都会执行。&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;程序继续运行...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>输出结果：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">发生了空指针异常: Cannot invoke <span class="string">&quot;String.length()&quot;</span> because <span class="string">&quot;str&quot;</span> is <span class="literal">null</span></span><br><span class="line">这是<span class="keyword">finally</span>块，无论是否发生异常都会执行。</span><br><span class="line">程序继续运行...</span><br></pre></td></tr></table></figure><p><strong>代码分析：</strong></p><ol><li><code>String str = null;</code>：我们定义了一个<code>String</code>类型的变量<code>str</code>，并将其初始化为<code>null</code>。</li><li><code>try</code>块：我们在<code>try</code>块中尝试调用<code>str.length()</code>方法，因为<code>str</code>是<code>null</code>，所以会抛出<code>NullPointerException</code>。</li><li><code>catch</code>块：当<code>NullPointerException</code>发生时，程序跳转到<code>catch</code>块，捕获这个异常，并打印错误信息。这里，<code>e.getMessage()</code>返回异常的详细信息。</li><li><code>finally</code>块：<code>finally</code>块中的代码无论是否发生异常都会执行，用来清理资源或执行一些必要的操作。</li><li>程序继续运行：尽管发生了异常，由于我们在<code>catch</code>块中处理了它，程序能够继续运行，不会崩溃。</li></ol><h3 id="示例-2"><a href="#示例-2" class="headerlink" title="示例 2"></a>示例 2</h3><p><code>ArrayIndexOutOfBoundsException</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayExceptionExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] numbers = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 访问数组中不存在的索引</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> numbers[<span class="number">5</span>];</span><br><span class="line">            System.out.println(<span class="string">&quot;数组中的数字是: &quot;</span> + number);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArrayIndexOutOfBoundsException e) &#123;</span><br><span class="line">            <span class="comment">// 捕获并处理数组越界异常</span></span><br><span class="line">            System.out.println(<span class="string">&quot;数组索引越界: &quot;</span> + e.getMessage());</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;数组处理结束。&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;程序继续运行...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>输出结果：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">数组索引越界: Index <span class="number">5</span> out of bounds <span class="keyword">for</span> length <span class="number">3</span></span><br><span class="line">数组处理结束。</span><br><span class="line">程序继续运行...</span><br></pre></td></tr></table></figure><p><strong>代码分析：</strong></p><ol><li><code>int[] numbers = &#123;1, 2, 3&#125;;</code>：我们定义了一个包含3个整数的数组。</li><li><code>try</code>：尝试访问数组的第6个元素（索引5），这将抛出<code>ArrayIndexOutOfBoundsException</code>，因为数组中只有3个元素。</li><li><code>catch</code>块：捕获并处理<code>ArrayIndexOutOfBoundsException</code>，打印异常信息。</li><li><code>finally</code>块：最后，无论是否发生异常，<code>finally</code>块都会执行，表示数组处理操作结束。</li><li>程序继续运行：捕获并处理异常后，程序继续正常运行。</li></ol><p><strong>总结：</strong></p><p>&emsp;&emsp;通过捕获和处理运行时异常，程序可以避免在发生错误时直接崩溃，从而提高程序的健壮性和用户体验。虽然Java不强制要求处理运行时异常，但在关键部分处理这些异常是编写健壮代码的好习惯。</p><h2 id="编译时异常"><a href="#编译时异常" class="headerlink" title="编译时异常"></a>编译时异常</h2><p>&emsp;&emsp;Java 中的编译异常（Checked Exceptions）是必须在编译时处理的异常。它们通常用于表示程序在正常执行流程中可能出现的可预见性错误（如文件未找到、数据库连接失败等）。如果程序没有对这些异常进行处理（通过<code>try-catch</code>块或<code>throws</code>声明），编译器将会报错，无法通过编译。</p><h3 id="处理机制"><a href="#处理机制" class="headerlink" title="处理机制"></a>处理机制</h3><p>编译异常的处理有两种主要方式：</p><ol><li><code>try-catch</code>块：在方法内部捕获并处理异常。</li><li><code>throws</code>声明：在方法签名中声明抛出异常，将异常抛给调用者处理。</li></ol><h3 id="示例-1-1"><a href="#示例-1-1" class="headerlink" title="示例 1"></a>示例 1</h3><p><code>try-catch</code>块可以用来捕获和处理编译异常，确保程序在发生错误时能够进行适当的处理。</p><p>处理<code>IOException</code>（例如文件未找到异常）的示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CheckedExceptionExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 尝试打开一个文件</span></span><br><span class="line">            reader = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;example.txt&quot;</span>));</span><br><span class="line">            <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> reader.readLine();</span><br><span class="line">            System.out.println(<span class="string">&quot;读取的行: &quot;</span> + line);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="comment">// 捕获并处理IOException</span></span><br><span class="line">            System.out.println(<span class="string">&quot;发生IO异常: &quot;</span> + e.getMessage());</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 确保资源被关闭</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (reader != <span class="literal">null</span>) &#123;</span><br><span class="line">                    reader.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;关闭文件时发生异常: &quot;</span> + e.getMessage());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>输出结果（假设文件不存在）：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">发生IO异常: example.txt (No such file or directory)</span><br></pre></td></tr></table></figure><p><strong>代码分析：</strong></p><ul><li><code>try</code>块：尝试打开一个名为<code>example.txt</code>的文件并读取其内容。</li><li><code>catch</code>块：如果文件不存在或无法读取，将抛出<code>IOException</code>，<code>catch</code>块捕获并处理该异常。</li><li><code>finally</code>块：确保文件读取器在操作完成后被正确关闭，避免资源泄漏。</li></ul><h3 id="示例-2-1"><a href="#示例-2-1" class="headerlink" title="示例 2"></a>示例 2</h3><p>另一种处理编译异常的方式是在方法签名中使用<code>throws</code>关键字，将异常抛给方法的调用者处理。</p><p>抛出<code>IOException</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThrowsExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            readFile(<span class="string">&quot;example.txt&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="comment">// 捕获并处理IOException</span></span><br><span class="line">            System.out.println(<span class="string">&quot;发生IO异常: &quot;</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 抛出IOException，由调用者处理</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">readFile</span><span class="params">(String filePath)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(filePath));</span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> reader.readLine();</span><br><span class="line">        System.out.println(<span class="string">&quot;读取的行: &quot;</span> + line);</span><br><span class="line">        reader.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>输出结果（假设文件不存在）：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">发生IO异常: example.txt (No such file or directory)</span><br></pre></td></tr></table></figure><p><strong>代码分析：</strong></p><ul><li><code>throws</code>声明：<code>readFile</code>方法在其签名中使用<code>throws IOException</code>，表示该方法可能会抛出<code>IOException</code>，调用者需要处理此异常。</li><li>调用者处理异常：在<code>main</code>方法中，调用<code>readFile</code>方法时使用<code>try-catch</code>块捕获并处理<code>IOException</code>。</li></ul><p><strong>总结</strong></p><p>&emsp;&emsp;编译异常的处理机制确保了程序在可能出现的错误情况下能够进行适当的处理，从而提高程序的健壮性。通过使用<code>try-catch</code>块处理异常，程序可以直接处理错误；通过<code>throws</code>声明，异常可以被传递给调用者，使得调用者可以根据上下文进行处理。这种机制使得Java的异常处理更加灵活和强大。</p><h2 id="自定义异常"><a href="#自定义异常" class="headerlink" title="自定义异常"></a>自定义异常</h2><p>&emsp;&emsp;在 Java 中，自定义异常是开发人员根据程序的需求创建的异常类，用于处理特定的业务逻辑错误或异常情况。虽然Java已经提供了大量的内置异常类，但在某些情况下，这些内置异常可能无法准确描述特定的问题或业务场景。自定义异常可以帮助我们更清晰地表达这些特殊情况，从而提高代码的可读性和可维护性。</p><h3 id="自定义异常的步骤"><a href="#自定义异常的步骤" class="headerlink" title="自定义异常的步骤"></a>自定义异常的步骤</h3><ol><li><strong>继承</strong><code>Exception</code>类或其子类：<ul><li>如果希望创建一个<strong>受检异常</strong>（必须处理的异常），需要继承<code>Exception</code>类。</li><li>如果希望创建一个<strong>非受检异常</strong>（不强制处理的异常），可以继承<code>RuntimeException</code>类。</li></ul></li><li><strong>提供构造方法</strong>：<ul><li>通常会提供一个默认的无参构造方法，以及一个可以接受异常信息的构造方法，方便在抛出异常时传递详细信息。</li></ul></li><li><strong>抛出自定义异常</strong>：<ul><li>在程序中适当的位置使用<code>throw</code>关键字抛出自定义异常。</li></ul></li></ol><h3 id="自定义受检异常"><a href="#自定义受检异常" class="headerlink" title="自定义受检异常"></a>自定义受检异常</h3><p>以下示例展示了如何创建一个自定义的受检异常<code>InvalidAgeException</code>，用于处理用户年龄不合法的情况。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定义异常类，继承Exception</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">InvalidAgeException</span> <span class="keyword">extends</span> <span class="title class_">Exception</span> &#123;</span><br><span class="line">    <span class="comment">// 默认构造方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">InvalidAgeException</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;年龄不合法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 接受自定义错误信息的构造方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">InvalidAgeException</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomExceptionExample</span> &#123;</span><br><span class="line">    <span class="comment">// 检查年龄的方法，可能会抛出InvalidAgeException</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">checkAge</span><span class="params">(<span class="type">int</span> age)</span> <span class="keyword">throws</span> InvalidAgeException &#123;</span><br><span class="line">        <span class="keyword">if</span> (age &lt; <span class="number">18</span> || age &gt; <span class="number">100</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">InvalidAgeException</span>(<span class="string">&quot;年龄必须在18到100岁之间。&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;年龄合法: &quot;</span> + age);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 调用方法并传入一个不合法的年龄</span></span><br><span class="line">            checkAge(<span class="number">15</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvalidAgeException e) &#123;</span><br><span class="line">            <span class="comment">// 捕获并处理自定义异常</span></span><br><span class="line">            System.out.println(<span class="string">&quot;捕获到异常: &quot;</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">捕获到异常: 年龄必须在<span class="number">18</span>到<span class="number">100</span>岁之间。</span><br></pre></td></tr></table></figure><h3 id="自定义非受检异常"><a href="#自定义非受检异常" class="headerlink" title="自定义非受检异常"></a>自定义非受检异常</h3><p>以下示例展示了如何创建一个自定义的非受检异常<code>InsufficientFundsException</code>，用于处理银行账户余额不足的情况。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定义异常类，继承RuntimeException</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">InsufficientFundsException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">    <span class="comment">// 默认构造方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">InsufficientFundsException</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;账户余额不足&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 接受自定义错误信息的构造方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">InsufficientFundsException</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BankAccount</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> balance;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BankAccount</span><span class="params">(<span class="type">double</span> balance)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.balance = balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 提款方法，可能会抛出InsufficientFundsException</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">withdraw</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (amount &gt; balance) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">InsufficientFundsException</span>(<span class="string">&quot;您的账户余额不足，无法提取: &quot;</span> + amount);</span><br><span class="line">        &#125;</span><br><span class="line">        balance -= amount;</span><br><span class="line">        System.out.println(<span class="string">&quot;成功提取: &quot;</span> + amount + <span class="string">&quot;，当前余额: &quot;</span> + balance);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">BankAccount</span> <span class="variable">account</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BankAccount</span>(<span class="number">1000.0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 尝试提取超过余额的金额</span></span><br><span class="line">            account.withdraw(<span class="number">1500.0</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InsufficientFundsException e) &#123;</span><br><span class="line">            <span class="comment">// 捕获并处理自定义异常</span></span><br><span class="line">            System.out.println(<span class="string">&quot;捕获到异常: &quot;</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>输出结果：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">捕获到异常: 您的账户余额不足，无法提取: <span class="number">1500.0</span></span><br></pre></td></tr></table></figure><h3 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h3><ul><li><code>InvalidAgeException</code> 和 <code>InsufficientFundsException**</code> 是两个自定义异常类，分别继承了<code>Exception</code>和<code>RuntimeException</code>。</li><li>这两个类都提供了默认构造方法和接受自定义错误信息的构造方法，使得在抛出异常时可以提供详细的错误描述。</li><li>在<code>BankAccount</code>类和<code>CustomExceptionExample</code>类中，通过检查条件，如果不满足要求，抛出自定义异常，并在<code>main</code>方法中通过<code>try-catch</code>块捕获这些异常，进行相应的处理。</li></ul><h3 id="自定义异常的好处"><a href="#自定义异常的好处" class="headerlink" title="自定义异常的好处"></a>自定义异常的好处</h3><ol><li><strong>表达清晰</strong>：自定义异常可以更准确地表达特定的业务错误，使代码更加清晰易懂。</li><li><strong>增强可维护性</strong>：通过自定义异常，可以将特定错误情景与普通逻辑代码分离，提高代码的可维护性。</li><li><strong>统一异常处理</strong>：在大规模应用中，可以统一处理某类特定的业务异常，从而提高异常处理的一致性和代码质量。</li></ol><p>通过合理使用自定义异常，可以使 Java 应用程序的异常处理机制更加灵活和高效。</p><h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><p>在 Java 中，当使用<code>try-catch-finally</code>结构时，即使<code>catch</code>块中有<code>return</code>语句，<code>finally</code>块中的代码仍然会执行，而且是在<code>catch</code>块中的<code>return</code>语句执行之前。也就是说，<code>finally</code>块的执行优先级高于<code>catch</code>块中的<code>return</code>。</p><h3 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TryCatchFinallyExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;返回值: &quot;</span> + testMethod());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">testMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">10</span> / <span class="number">0</span>; <span class="comment">// 这里会抛出异常</span></span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;捕获异常: &quot;</span> + e.getMessage());</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>; <span class="comment">// catch块中有return语句</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;执行finally块&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>输出结果：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">捕获异常: / by zero</span><br><span class="line">执行<span class="keyword">finally</span>块</span><br><span class="line">返回值: <span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>代码分析：</strong></p><ol><li><code>try</code>块：尝试执行<code>10 / 0</code>，会抛出<code>ArithmeticException</code>，所以直接跳转到<code>catch</code>块，<code>result</code>的值不会被返回。</li><li><code>catch</code>块：捕获到<code>ArithmeticException</code>，打印“捕获异常: &#x2F; by zero”，并且遇到<code>return 1;</code>准备返回值1。但在真正返回值之前，Java会先执行<code>finally</code>块。</li><li><code>finally</code>块：<code>finally</code>块无论如何都会执行，所以会打印“执行finally块”。</li><li>返回值：<code>finally</code>块执行完毕后，程序才会继续执行<code>catch</code>块中的<code>return</code>语句，最终返回值为1。</li></ol><p><strong>关键点总结：</strong></p><ul><li><code>finally</code>块总会执行：无论在<code>try</code>或<code>catch</code>块中是否有<code>return</code>语句，<code>finally</code>块的代码总会执行。</li><li>执行顺序：<code>finally</code>块的代码执行完毕后，程序才会从<code>try</code>或<code>catch</code>块中的<code>return</code>语句中返回。</li></ul><h3 id="特殊情况"><a href="#特殊情况" class="headerlink" title="特殊情况"></a>特殊情况</h3><p>&emsp;&emsp;如果在<code>finally</code>块中也有<code>return</code>语句，那么<code>finally</code>块中的<code>return</code>将会覆盖<code>try</code>或<code>catch</code>块中的<code>return</code>语句，最终返回<code>finally</code>块中的值。</p><p><strong>示例：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TryCatchFinallyExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;返回值: &quot;</span> + testMethod());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">testMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">10</span> / <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;捕获异常: &quot;</span> + e.getMessage());</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;执行finally块&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span>; <span class="comment">// 覆盖之前的返回值</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>输出结果：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">捕获异常: / by zero</span><br><span class="line">执行<span class="keyword">finally</span>块</span><br><span class="line">返回值: <span class="number">2</span></span><br></pre></td></tr></table></figure><p>在这个例子中，由于<code>finally</code>块中的<code>return</code>语句，最终返回的值是2，而不是<code>catch</code>块中的1。因此，应谨慎在<code>finally</code>块中使用<code>return</code>语句，因为它会影响返回值，可能导致意料之外的行为。</p><h3 id="进一步解释"><a href="#进一步解释" class="headerlink" title="进一步解释"></a>进一步解释</h3><p>&emsp;&emsp;在 Java 中，当涉及到<code>try-catch-finally</code>结构时，<code>finally</code>块的设计初衷就是为了确保资源的释放或一些必要的清理操作无论如何都能执行。这种设计导致了<code>finally</code>块的执行优先级非常高，以至于即使在<code>try</code>或<code>catch</code>块中已经出现了<code>return</code>语句，Java也会确保<code>finally</code>块中的代码先执行。</p><p><strong>具体执行过</strong></p><p>当JVM遇到<code>try-catch-finally</code>结构时，执行顺序和行为如下：</p><ol><li><code>try</code>块：程序首先进入<code>try</code>块，执行其中的代码。</li><li><code>catch</code>块：如果<code>try</code>块中发生了异常，程序会跳转到相应的<code>catch</code>块中执行代码。如果<code>catch</code>块中有<code>return</code>语句，JVM会记录下这个返回值（或者跳转目标），但在实际返回之前会先执行<code>finally</code>块。</li><li><code>finally</code>块：无论<code>try</code>或<code>catch</code>块中是否有<code>return</code>、<code>break</code>、<code>continue</code>或者抛出异常，<code>finally</code>块中的代码都会执行。</li><li>返回<code>catch</code>或<code>try</code>块的<code>return</code>值：如果<code>finally</code>块中没有<code>return</code>语句，程序会返回先前在<code>try</code>或<code>catch</code>块中准备好的返回值。</li><li><code>finally</code>块中的**<code>return</code>覆盖：如果<code>finally</code>块中有<code>return</code>语句，这个<code>return</code>会覆盖<code>try</code>或<code>catch</code>块中的任何返回值，直接返回<code>finally</code>块中的值。这是因为<code>finally</code>块是最后执行的代码块，其<code>return</code>语句直接决定了最终返回值。</li></ol><p><strong>原因分析：</strong></p><p>这种行为的原因与Java的异常处理机制设计有关：</p><ul><li><strong>资源管理和一致性</strong>：<code>finally</code>块主要用于确保资源的正确释放（如关闭文件、释放锁、关闭数据库连接等），即使在异常或提前返回的情况下也不例外。因此，Java的设计者确保了<code>finally</code>块能够在任何情况下执行，从而保证资源管理的一致性。</li><li><strong>执行顺序和返回值的确定性</strong>：为了避免执行顺序的混乱，Java选择了在<code>finally</code>块执行后，再决定是否从<code>try</code>或<code>catch</code>块返回结果。这样可以确保在任何情况下，<code>finally</code>块的操作都不会被忽略。</li><li><strong>覆盖行为</strong>：当<code>finally</code>块中存在<code>return</code>语句时，JVM认为<code>finally</code>块中执行的操作是最终的，所以直接返回<code>finally</code>中的值。这是为了确保<code>finally</code>块的操作是决定性的，这也就导致了<code>try</code>或<code>catch</code>块中的返回值被覆盖。</li></ul><p><strong>总结：</strong></p><p>&emsp;&emsp;<code>finally</code>块的执行优先级高于<code>try</code>和<code>catch</code>块中的返回操作是为了保证代码执行的确定性和资源管理的一致性。当<code>finally</code>块中有<code>return</code>语句时，JVM直接返回<code>finally</code>块中的值，从而覆盖<code>try</code>或<code>catch</code>块中的返回值。这种设计虽然有效地保证了资源管理，但也需要开发人员在编写代码时谨慎使用<code>finally</code>块中的<code>return</code>语句，以避免意外的行为。</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://yingfei-m.github.io">小蓝_</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://yingfei-m.github.io/2024/08/31/e2be8d86.html">https://yingfei-m.github.io/2024/08/31/e2be8d86.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://yingfei-m.github.io" target="_blank">小蓝_</a>！</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/img/cat.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.4/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.4/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2024/08/25/fb7b3d56.html" title="26-Java｜包装类"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">26-Java｜包装类</div></div><div class="info-2"><div class="info-item-1">包装类介绍&emsp;&emsp;Java 语言是一个面向对象的编程语言，但是 Java 中的基本数据类型却不是面向对象的，但是我们在实际使用中经常需要将基本数据类型转换成对象，便于操作，比如，集合的操作中，这时，我们就需要将基本类型数据转化成对象，所以就出现了包装类。基本数据类型有 8 个，对应的包装类也是 8 个，如果下图所示 基本数据类型 包装类 byte Byte short Short int Integer long Long float Float double Double char Character boolean Boolean 包装类的继承关系 包装类的基本操作&emsp;&emsp;8 个包装类都带有自己对应的构造方法，java 中的包装类提供了将原始数据类型转换为对象，以及将对象转换为原始数据类型的机制。这里举例说明下这个过程 基本数据类型 —&gt; 包装类12345678910111213141516171819202122232425262728293031323334353637import...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/cat.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">小蓝_</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">26</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">小蓝的计算机学习之路</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">1.</span> <span class="toc-text">异常的概念</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E7%9A%84%E4%BD%93%E7%B3%BB"><span class="toc-number">2.</span> <span class="toc-text">异常的体系</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%97%B6%E5%BC%82%E5%B8%B8"><span class="toc-number">2.1.</span> <span class="toc-text">运行时异常</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-1"><span class="toc-number">2.1.1.</span> <span class="toc-text">示例 1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-2"><span class="toc-number">2.1.2.</span> <span class="toc-text">示例 2</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E6%97%B6%E5%BC%82%E5%B8%B8"><span class="toc-number">2.2.</span> <span class="toc-text">编译时异常</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6"><span class="toc-number">2.2.1.</span> <span class="toc-text">处理机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-1-1"><span class="toc-number">2.2.2.</span> <span class="toc-text">示例 1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-2-1"><span class="toc-number">2.2.3.</span> <span class="toc-text">示例 2</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8"><span class="toc-number">2.3.</span> <span class="toc-text">自定义异常</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E7%9A%84%E6%AD%A5%E9%AA%A4"><span class="toc-number">2.3.1.</span> <span class="toc-text">自定义异常的步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%97%E6%A3%80%E5%BC%82%E5%B8%B8"><span class="toc-number">2.3.2.</span> <span class="toc-text">自定义受检异常</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%9D%9E%E5%8F%97%E6%A3%80%E5%BC%82%E5%B8%B8"><span class="toc-number">2.3.3.</span> <span class="toc-text">自定义非受检异常</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-number">2.3.4.</span> <span class="toc-text">代码分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-number">2.3.5.</span> <span class="toc-text">自定义异常的好处</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-number">3.</span> <span class="toc-text">其他</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-number">3.0.1.</span> <span class="toc-text">示例代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5"><span class="toc-number">3.0.2.</span> <span class="toc-text">特殊情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E4%B8%80%E6%AD%A5%E8%A7%A3%E9%87%8A"><span class="toc-number">3.0.3.</span> <span class="toc-text">进一步解释</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/31/e2be8d86.html" title="27-Java｜异常处理">27-Java｜异常处理</a><time datetime="2024-08-31T10:18:55.000Z" title="发表于 2024-08-31 18:18:55">2024-08-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/25/fb7b3d56.html" title="26-Java｜包装类">26-Java｜包装类</a><time datetime="2024-08-25T15:54:18.000Z" title="发表于 2024-08-25 23:54:18">2024-08-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/25/c0a01fc8.html" title="25-Java｜枚举类">25-Java｜枚举类</a><time datetime="2024-08-25T13:02:15.000Z" title="发表于 2024-08-25 21:02:15">2024-08-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/25/37aac15f.html" title="24-Java｜内部类">24-Java｜内部类</a><time datetime="2024-08-25T11:20:21.000Z" title="发表于 2024-08-25 19:20:21">2024-08-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/24/8add23f7.html" title="21-Java｜interface接口">21-Java｜interface接口</a><time datetime="2024-08-24T11:02:46.000Z" title="发表于 2024-08-24 19:02:46">2024-08-24</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2025 By 小蓝_</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.3.2"></script><script src="/js/main.js?v=5.3.2"></script><div class="js-pjax"></div><script defer id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.4/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zindex="-1" mobile="false" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>